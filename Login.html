<!DOCTYPE html>

<!-- The purpose of this page is to login to the website to access services
TODO: We should provide 2 services, register and forgot password. -->


<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="help.css">
    <title>TempuTrip</title>
    
    <script src="//fb.me/react-0.14.6.js"></script>
<script type="text/javascript" src="react-data-grid/dist/react-data-grid.js"></script>
    <script src="build/react.js"></script>
    <script src="build/react-dom.js"></script>
    <script src="https://unpkg.com/babel-core@5.8.38/browser.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
    <script src="init.js"></script>
    <script src="log.js"></script>
    
<a href="http://jquery.com/">jQuery</a>
<script src="jquery-3.1.0.js"></script>
<style>
        .hide
        {
            display: none;
        }
</style>

    
</head>
 
<body>
    <div id="lotOfPages">
    
    <div class="view hide" id="page3" ng-include="'Landing.html'">
            <h1>Landing</h1>
        </div>

    </div>
    <button id="showPage3Btn" data-launch-view="page3">Landing</button>

</body>

<body class="background">

<button onclick="goBack()">Go Back</button>

<script>
$(document).ready(function (e) {
totalVisitors.on('value', logVisitorCount);

    function showView(viewName) {
            $('.view').hide();
    $('#' + viewName).show();
    }

        $('[data-launch-view]').click(function (e) {
            e.preventDefault();
            var viewName = $(this).attr('data-launch-view');
            showView(viewName);
            window.location.href="Landing.html";
        });

    });

    function goBack() {
        window.history.back();
    }

</script>

<script>
    "use strict";
  
    var ref = new Firebase("https://temputrip.firebaseio.com");
ref.createUser({
  email: "bobtony@firebase.com",
  password: "correcthorsebatterystaple"
}, function(error, userData) {
  if (error) {
    switch (error.code) {
      case "EMAIL_TAKEN":
        console.log("The new user account cannot be created because the email is already in use.");
        break;
      case "INVALID_EMAIL":
        console.log("The specified email is not a valid email.");
        break;
      default:
        console.log("Error creating user:", error);
    }
  } else {
    console.log("Successfully created user account with uid:", userData.uid);
  }
});
        function authDataCallback(authData) {
  if (authData) {
    console.log("User " + authData.uid + " is logged in with " + authData.provider);
  } else {
    console.log("User is logged out");
  }
}
// Register the callback to be fired every time auth state changes
var ref = new Firebase("https://temputrip.firebaseio.com");
ref.onAuth(authDataCallback);
        
        var ref = new Firebase("https://temputrip.firebaseio.com");
var authData = ref.getAuth();

if (authData) {
  console.log("User " + authData.uid + " is logged in with " + authData.provider);
} else {
  console.log("User is logged out");
}
        
        // Create a callback to handle the result of the authentication
function authHandler(error, authData) {
  if (error) {
    console.log("Login Failed!", error);
  } else {
    console.log("Authenticated successfully with payload:", authData);
  }
}

// Authenticate users with a custom authentication token
ref.authWithCustomToken("<token>", authHandler);

// Alternatively, authenticate users anonymously
ref.authAnonymously(authHandler);

// Or with an email/password combination
ref.authWithPassword({
  email    : 'bobtony@firebase.com',
  password : 'correcthorsebatterystaple'
}, authHandler);

// Or via popular OAuth providers ("facebook", "github", "google", or "twitter")
ref.authWithOAuthPopup("<provider>", authHandler);
ref.authWithOAuthRedirect("<provider>", authHandler);
        
        // we would probably save a profile when we register new users on our site
// we could also read the profile to see if it's null
// here we will just simulate this with an isNewUser boolean
var isNewUser = true;

var ref = new Firebase("https://temputrip.firebaseio.com");
ref.onAuth(function(authData) {
  if (authData && isNewUser) {
    // save the user's profile into the database so we can list users,
    // use them in Security and Firebase Rules, and show profiles
    ref.child("users").child(authData.uid).set({
      provider: authData.provider,
      name: getName(authData)
    });
  }
});

// find a suitable name based on the meta info given by each provider
function getName(authData) {
  switch(authData.provider) {
     case 'password':
       return authData.password.email.replace(/@.*/, '');
     case 'twitter':
       return authData.twitter.displayName;
     case 'facebook':
       return authData.facebook.displayName;
  }
}
    </script>


<div class="inthe">


<header>
    <h1 class="center"> Welcome to TempuTrip! </h1>
    <p class="center"><b>The best place to go to find out where to vacation!</b></p>
</header>
<div class="center">
    <p class="center">Simply pick an area and time and we'll tell you where the best place based on weather will be to go.</p>
    <form action="landing.html">

        <label for="email">Your email address:</label>
        <input id="email" name= "email" type = "email" placeholder="abc@cdf.com">
        
        <div id="container">
            <!-- The button Register will make the registration buttons show up. -->
	    </div>

        <br/>

        <label for="pass">Password:</label>
        <input id="pass" name= "pass" type = "password">

        <input type="submit" value="login">
        
        

    </form>
</div>

<footer>
    <address>
        <p class="center">This site is developed by
        <a href="mailto:sborghei@gmu.edu">Sara Borghei</a>
            and
        <a href="mailto:ssaad2@gmu.edu">Sara Saad</a>
        </p>
    </address>
</footer>

</div>


</body>
    
    
</html>
